<!DOCTYPE html>
<html lang="de">
	<head>
	<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Home</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<link rel="stylesheet" href="Css.css">
	</head>
	<body>
		<header>
			<h1 class="startseiteH1">Animes</h1>
			<nav class="navigationBox schatten">
				<ul class="navigationList">
					<li class="navigationButton"><a href="Home.html" class="navigation">Startseite</a></li>
					<li class="navigationButton"><a href="Datenbank Uebersicht Anime.html" class="navigation">Animes</a></li>
					<li class="navigationButton"><a href="Datenbank Uebersicht Manga.html" class="navigation">Mangas</a></li>
					<li class="navigationButton"><a href="Registration.html" class="navigation">Registration</a></li>
					<li class="navigationButton"><a href="Login.html" class="navigation">Log in</a></li>
					<li><input type="text" id="suche" placeholder="Suche..." class="searchBar"></li>
				</ul>
			</nav>
		</header>
		<footer class="navigationBox2 schatten">
				<ul class="navigationList">
					<li class="navigationButton"><a href="Impressum.html" class="navigation">Impressum</a></li>
					<li class="navigationButton navigationButton2"><a href="Admin Ansicht.html" class="navigation">Admin Ansicht</a></li>
				</ul>
		</footer>
		<main>
			<form id="uploadForm" enctype="multipart/form-data">
				<article class="mainBox">
					<section class="filter">
						<label class="labelSpaceRight">Genre: </label>
						<select id="Genre" class="dropdownMenue" name="Genre">
						</select>
						<label class="labelSpaceLeft labelSpaceRight">Season:</label>
						<select id="Season" class="dropdownMenue" name="Season">
						</select>
						<label class="labelSpaceLeft labelSpaceRight">Jahr:</label>
						<select id="Jahr" class="dropdownMenue" name="Jahr">
						</select>
						<label class="labelSpaceLeft labelSpaceRight">Format:</label>
						<select id="Format" class="dropdownMenue" name="Format">
						</select>
						<label class="labelSpaceLeft labelSpaceRight">Source:</label>
						<select id="Source" class="dropdownMenue" name="Source">
						</select>
						<!--
						<label class="labelSpaceLeft labelSpaceRight">:</label>
						<select id="select" class="dropdownMenue">
							<option value=""></option>
						</select>
						-->
					</section>
					<section class="genreAuswahlBox">
						<img src="Bilder\Genres\Action.png" class="genreAuswahl"></img>
						<img src="Bilder\Genres\Adventure.png" class="genreAuswahl"></img>
					</section>
				</article>
				<article class="mainBox datenbankBox">
					<table class="pictureTable" id="AnimeTable">
						<!--<tr>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Anime/Bleach 2.png" width="215"></image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
						</tr>
						<tr>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
							<td class="animeEintragTabelleTD"><image src="Bilder/Bleach.png" width="215" height="300"><p>BLEACH</image></td>
						</tr> -->
					</table>
					<footer class="navigationBox2 schatten">
						<ul class="navigationList">
							<li class="navigationButton"><a href="Home.html" class="navigation">Impressum</a></li>
							<li class="navigationButton navigationButton2"><a href="Admin Ansicht.html" class="navigation">Admin Ansicht</a></li>
						</ul>
					</footer>
				</article>
			<article class="hinterGrundBox">
			</article>
				<article class="eintragBox schatten">
					<section class="eintragBildBox schatten">
						<img src="Bilder/Bleach.png" class="eintragBild"></img>
					</section>
					<section class="eintragAuswahlBox">
						<select id="ListStatus" type="dropdownMenue" name="ListStatus">
							<option value="0">---</option>
						</select>
					</section>
					<section class="eintragLoeschen">
						<label>Delete</label>
					</section>
					<section class="eintragH1Box">
						<label>Bleach</label>
					</section>
					<section class="eintragInfoBox">
						<table class="eintragTable">
							<tr>
								<td class="eintragTableTD"><b><label>Englischer Titel:</label></b></td>
								<td><label>Bleach</label></td>
							</tr>
							<tr>
								<td><b><label>Deutscher Titel:</label></b></td>
								<td><label>Bleach</label></td>
							</tr>
						</table>
						<table class="eintragTable eintragTable2">
							<tr>
								<td class="eintragTableTD"><b><label>Beschreibung:</label></b></td>
								<td><label> Der 15-jährige Schüler Ichigo Kurosaki kann seit seiner Kindheit Geister sehen. 
											Doch damit nicht genug: Als er die Shinigami Rukia trifft, wird sein Leben noch einmal gehörig auf den Kopf gestellt. 
											Während eines Kampfes in der Menschenwelt ist Rukia gezwungen, ihre Kräfte auf Ichigo zu übertragen, um ihrer beider Leben zu retten. 
											Dank der neu gewonnenen spirituellen Kräfte entdeckt Ichigo seine wahre Berufung: 
											die Lebenden wie die Toten um alles in der Welt vor dem Bösen zu beschützen.
											<br>
											<br>
											(Quelle: crunchyroll)
								</label></td>
							</tr>
						</table>
						<table class="eintragTable2">
							<tr>
								<td class="eintragTableTD"><b><label>Folgen:</label></b></td>
								<td><label>366</label></td>
							</tr>
							<tr>
								<td class="eintragTableTD"><b><label>Folgen l&auml;nge:</label></b></td>
								<td><label>24min</label></td>
							</tr>
						</table>
						<table class="eintragTable2">
							<tr>
								<td class="eintragTableTD"><b><label>Start:</label></b></td>
								<td><label>05.10.2004</label></td>
							</tr>
							<tr>
								<td class="eintragTableTD"><b><label>End:</label></b></td>
								<td><label>27.03.2012</label></td>
							</tr>
						</table>
						<table class="eintragTable2">
							<tr>
								<td class="eintragTableTD"><b><label>Format:</label></b></td>
								<td><label>TV</label></td>
							</tr>
							<tr>
								<td class="eintragTableTD"><b><label>Source:</label></b></td>
								<td><label>Manga</label></td>
							</tr>
							<tr>
								<td class="eintragTableTD"><b><label>Studio:</label></b></td>
								<td><label>Studio Pierrot</label></td>
							</tr>
							<tr>
								<td class="eintragTableTD"><b><label>Genres:</label></b></td>
								<td><label>Action<br>Adventure<br>Supernatural</label></td>
							</tr>
						</table>
					</section>
				</article>
			</form>
		</main>
		<script>
			
			$(document).ready(function() {
				LoadAndDisplayDropDownMenues()
			})

			function LoadAndDisplayDropDownMenues(){
				$.ajax({
					url: 'http://localhost:8000/api/genre/alle',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderGenreOptions(response);                
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/season/alle',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderSeasonOptions(response);                
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/jahr/alle',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderJahrOptions(response);                
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/format/alle/Anime',
					method: 'get',
                	contentType: 'application/json; charset=utf-8',
                	cache: false,
                	dataType: 'json',
				}).done(function (response) {
                	console.log(response);
                	RenderFormatOptions(response);                
            	}).fail(function (jqXHR, statusText, error) {
                	console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
                	$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/source/alle',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderSourceOptions(response);                
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/listStatus/alle/Anime',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderStatusListStatus(response);
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
				
				$.ajax({
					url: 'http://localhost:8000/api/Anime/Alle',
					method: 'get',
					contentType: 'application/json; charset=utf-8',
					cache: false,
					dataType: 'json',
				}).done(function (response) {
					console.log(response);
					RenderAnimeTable(response);
				}).fail(function (jqXHR, statusText, error) {
					console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
					$('#output').html('Ein Fehler ist aufgetreten');
				})
			}

			function RenderGenreOptions(arr) {
				console.log(arr);
				var select = document.getElementById("Genre");

				for (var i = 0; i < arr.length; i++){
					var opt = document.createElement("option");
					opt.value = arr[i].id;
					opt.innerHTML = arr[i].genre;
					select.appendChild(opt);
				}
			}

			function RenderSeasonOptions(arr) {
				console.log(arr);
				var select = document.getElementById("Season");

				for (var i = 0; i < arr.length; i++){
					var opt = document.createElement("option");
					opt.value = arr[i].id;
					opt.innerHTML = arr[i].season;
					select.appendChild(opt);
				}
			}

			function RenderJahrOptions(arr) {
				console.log(arr);
				var select = document.getElementById("Jahr");

				for (var i = 0; i < arr.length; i++){
					var opt = document.createElement("option");
					opt.value = arr[i].id;
					opt.innerHTML = arr[i].jahr;
					select.appendChild(opt);
				}
			}

			function RenderFormatOptions(arr) {
				console.log(arr);
				var select = document.getElementById("Format");

				for (var i = 0; i < arr.length; i++){
					var opt = document.createElement("option");
					opt.value =  arr[i].id;
					opt.innerHTML = arr[i].format;
					select.appendChild(opt);
				}
			}
						
			function RenderSourceOptions(arr) {
				console.log(arr);
				var select = document.getElementById("Source");

				for (var i = 0; i <arr.length; i++){
					var opt = document.createElement("option");
					opt.value = arr[i].id;
					opt.innerHTML = arr[i].source;
					select.appendChild(opt);
				}
			}
			
			function RenderStatusListStatus(arr) {
				console.log(arr);
				var select = document.getElementById("ListStatus");

				for (var i = 0; i <arr.length; i++){
					var opt = document.createElement("option");
					opt.value = arr[i].id;
					opt.innerHTML = arr[i].ListStatus;
					select.appendChild(opt);
				}
			}

			function RenderAnimeTable(arr){
				var table = document.getElementById("AnimeTable");
				var thead = $('<thead>')
								.append($('<tr>')
									.append($('<th>'))
									.append($('<th>'))
									.append($('<th>'))
									.append($('<th>'))
									.append($('<th>'))
									.append($('<th>'))
								)
					table.append(thead)
					var body = $('<tbody>');
						var tr = $('<tr>');
							var zaehler = 0;

							var tr = $('<tr>');

							$(arr).each(function(idx, item) 
							{
								if(zaehler % 6 != 0 || zaehler == 0) {
									alert(JSON.stringify(tr))
									tr.append($('<td class="animeEintragTabelleTD">').html('<image src="' + item.cover + '" width="215" height="300"><p>' + item.romaji));
									body.append(tr)
									}
								else
								{
									tr.append($('<td class="animeEintragTabelleTD">').html('<image src="' + item.cover + '" width="215" height="300"><p>' + item.romaji));
									body.append(tr)
									tr = $('<tr>');
								}
								zaehler += 1;

							})

				table.append(body)
									
			}

		</script>
	</body>
</html>